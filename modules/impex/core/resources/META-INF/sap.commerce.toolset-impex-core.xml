<!--
  ~ This file is part of "SAP Commerce Developers Toolset" plugin for IntelliJ IDEA.
  ~ Copyright (C) 2019-2025 EPAM Systems <hybrisideaplugin@epam.com> and contributors
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Lesser General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  ~ See the GNU Lesser General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public License
  ~ along with this program. If not, see <http://www.gnu.org/licenses/>.
  -->
<idea-plugin>

    <extensionPoints>
        <extensionPoint qualifiedName="sap.commerce.toolset.impex.interceptorProvider"
                        interface="sap.commerce.toolset.impex.constants.modifier.InterceptorProvider"
                        dynamic="false"/>
    </extensionPoints>

    <extensions defaultExtensionNs="sap.commerce.toolset">
        <project.preImportConfigurator implementation="sap.commerce.toolset.impex.configurator.ImpExCodeStyleConfigurator"/>
    </extensions>

    <extensions defaultExtensionNs="com.intellij">
        <internalFileTemplate name="ImpEx File"/>

        <fileType name="ImpEx" language="ImpEx" extensions="impex" fieldName="INSTANCE"
                  implementationClass="sap.commerce.toolset.impex.file.ImpExFileType"/>

        <defaultLiveTemplates file="liveTemplates/ImpEx.xml"/>
        <liveTemplateContext contextId="IMPEX" implementation="sap.commerce.toolset.impex.liveTemplates.ImpExContextType"/>

        <colorSettingsPage implementation="sap.commerce.toolset.impex.highlighting.ImpExColorSettingsPage"/>

        <additionalTextAttributes scheme="Default" file="colorSchemes/ImpExDefault.xml"/>
        <additionalTextAttributes scheme="Darcula" file="colorSchemes/ImpExDarcula.xml"/>

        <platform.backend.documentation.psiTargetProvider implementation="sap.commerce.toolset.impex.lang.documentation.ImpExPsiDocumentationTargetProvider"/>
        <platform.backend.documentation.targetProvider implementation="sap.commerce.toolset.impex.lang.documentation.ImpExDocumentationTargetProvider"/>

        <vfs.asyncListener implementation="sap.commerce.toolset.impex.vfs.event.ImpExVfsAsyncListener"/>

        <lang.parserDefinition language="ImpEx" implementationClass="sap.commerce.toolset.impex.ImpExParserDefinition"/>
        <lang.syntaxHighlighterFactory language="ImpEx" implementationClass="sap.commerce.toolset.impex.highlighting.ImpExSyntaxHighlighterFactory"/>
        <lang.commenter language="ImpEx" implementationClass="sap.commerce.toolset.impex.lang.ImpExCommenter"/>
        <lang.formatter language="ImpEx" implementationClass="sap.commerce.toolset.impex.formatting.ImpExFormattingModelBuilder"/>
        <lang.foldingBuilder language="ImpEx" implementationClass="sap.commerce.toolset.impex.lang.folding.ImpExFoldingBuilder"/>
        <lang.foldingBuilder language="ImpEx" implementationClass="sap.commerce.toolset.impex.lang.folding.ImpExFoldingLinesBuilder"/>
        <lang.foldingBuilder language="ImpEx" implementationClass="sap.commerce.toolset.impex.lang.folding.ImpExMacroFoldingBuilder"/>
        <lang.refactoringSupport language="ImpEx" implementationClass="sap.commerce.toolset.impex.lang.refactoring.ImpExRefactoringSupportProvider"/>

        <codeStyleSettingsProvider implementation="sap.commerce.toolset.impex.formatting.ImpExCodeStyleSettingsProvider"/>
        <langCodeStyleSettingsProvider implementation="sap.commerce.toolset.impex.formatting.ImpExLanguageCodeStyleSettingsProvider"/>

        <vetoRenameCondition implementation="sap.commerce.toolset.impex.lang.refactoring.ImpExVetoRenameCondition"/>
        <renameInputValidator implementation="sap.commerce.toolset.impex.lang.refactoring.ImpExRenameInputValidator"/>
        <renamePsiElementProcessor implementation="sap.commerce.toolset.impex.lang.refactoring.ImpExRenamePsiElementProcessor"/>

        <projectConfigurable id="hybris.project.impex.settings" parentId="hybris.project.settings"
                             nonDefaultProject="true" dynamic="true"
                             bundle="i18n.HybrisBundle" key="hybris.settings.project.impex.title"
                             order="after hybris.project.integrations.settings"
                             provider="sap.commerce.toolset.impex.options.ProjectImpExSettingsConfigurableProvider"/>

        <completion.contributor language="ImpEx" implementationClass="sap.commerce.toolset.impex.codeInsight.completion.ImpExCompletionContributor"/>

        <highlightUsagesHandlerFactory
                implementation="sap.commerce.toolset.impex.highlighting.findUsages.ImpExHighlightMacrosHandlerFactory"/>

        <lang.findUsagesProvider language="ImpEx" implementationClass="sap.commerce.toolset.impex.lang.findUsages.ImpExFindUsagesProvider"/>

        <annotator language="ImpEx" implementationClass="sap.commerce.toolset.impex.lang.annotation.ImpExAnnotator"/>

        <codeInsight.lineMarkerProvider language="ImpEx" implementationClass="sap.commerce.toolset.impex.lang.ImpExLineMarkerProvider"/>
        <codeInsight.declarativeInlayProvider language="ImpEx"
                                              implementationClass="sap.commerce.toolset.impex.codeInsight.hints.ImpExDefaultValueDeclarativeInlayProvider"
                                              isEnabledByDefault="true"
                                              group="VALUES_GROUP"
                                              providerId="hybris.ImpEx.defaultValue"
                                              bundle="i18n.HybrisBundle"
                                              nameKey="hybris.editor.impex.inlay_provider.default_value.name"
                                              descriptionKey="hybris.editor.impex.inlay_provider.default_value.description"/>
        <codeInsight.declarativeInlayProvider language="ImpEx"
                                              implementationClass="sap.commerce.toolset.impex.codeInsight.hints.ImpExParameterInlayHintProvider"
                                              isEnabledByDefault="true"
                                              group="VALUES_GROUP"
                                              providerId="hybris.ImpEx.parameter"
                                              bundle="i18n.HybrisBundle"
                                              nameKey="hybris.impex.editor.parameter.name"
                                              descriptionKey="hybris.impex.editor.parameter.description"/>
    </extensions>

    <extensions defaultExtensionNs="com.intellij">
        <localInspection groupPath="SAP Commerce" shortName="ImpexLanguageIsNotSupportedInspection" displayName="[y] Language is not supported"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExLanguageIsNotSupportedInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpexLanguageModifierIsNotAllowedInspection" displayName="[y] Lang modifier is not allowed for non-localized attributes"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExLanguageModifierIsNotAllowedInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpexNoUniqueValueInspection" displayName="[y] No unique value in column"
                         groupName="[y] ImpEx" level="WEAK WARNING" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExNoUniqueValueInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpexUnknownConfigPropertyInspection" displayName="[y] Unknown configuration property"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExUnknownConfigPropertyInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpexUnknownMacrosInspection" displayName="[y] Unknown macros"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExUnknownMacrosInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpexUnknownTypeAttributeInspection" displayName="[y] Unknown attribute"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExUnknownTypeAttributeInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpExDoubleQuotedStringAsModifierInspection" displayName="[y] Double Quote string as a modifier"
                         groupName="[y] ImpEx" level="WEAK WARNING" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExDoubleQuotedStringAsModifierInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpexUnknownFunctionTypeInspection" displayName="[y] Unknown type"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExUnknownFunctionTypeInspection"/>


        <localInspection groupPath="SAP Commerce" shortName="ImpexConfigProcessorInspection" displayName="[y] Incorrect use of $config macros"
                         groupName="[y] ImpEx" level="WEAK WARNING" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExConfigProcessorInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpexFunctionReferenceTypeMismatchInspection" displayName="[y] Mismatch reference attribute inline type"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExFunctionReferenceTypeMismatchInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpexUniqueAttributeWithoutIndex" displayName="[y] Unique attribute without an index"
                         groupName="[y] ImpEx" level="WEAK WARNING" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExUniqueAttributeWithoutIndexInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpexUniqueDocumentId" displayName="[y] Unique document Id in column"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExUniqueDocumentIdInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpexUnknownTypeNameInspection" displayName="[y] Unknown type"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExUnknownTypeNameInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpExInvalidProcessorValueInspection" displayName="[y] Invalid processor modifier value"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExInvalidProcessorValueInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpExInvalidTranslatorValueInspection" displayName="[y] Invalid translator modifier value"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExInvalidTranslatorValueInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpExInvalidCellDecoratorValueInspection" displayName="[y] Invalid cellDecorator modifier value"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExInvalidCellDecoratorValueInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpExInvalidModeModifierValueInspection" displayName="[y] Invalid mode modifier value"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExInvalidModeModifierValueInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpExInvalidDisableInterceptorTypesModifierValueInspection" displayName="[y] Invalid disable.interceptor.types modifier value"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExInvalidDisableInterceptorTypesModifierValueInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpExInvalidBooleanModifierValueInspection" displayName="[y] Invalid boolean modifier value"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExInvalidBooleanModifierValueInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpexUnknownTypeModifierInspection" displayName="[y] Unknown type modifier"
                         groupName="[y] ImpEx" level="WEAK WARNING" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExUnknownTypeModifierInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpexUnknownAttributeModifierInspection" displayName="[y] Unknown attribute modifier"
                         groupName="[y] ImpEx" level="WEAK WARNING" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExUnknownAttributeModifierInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpexOnlyUpdateAllowedForNonDynamicEnumInspection" displayName="[y] Unknown type"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExOnlyUpdateAllowedForNonDynamicEnumInspection"/>

        <localInspection groupPath="SAP Commerce" shortName="ImpExIncompleteHeaderAbbreviationUsageInspection" displayName="[y] Incomplete header abbreviation usage"
                         groupName="[y] ImpEx" level="ERROR" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExIncompleteHeaderAbbreviationUsageInspection"/>
        <localInspection groupPath="SAP Commerce" shortName="ImpExMissingValueGroupInspection" displayName="[y] Missing value groups"
                         groupName="[y] ImpEx" level="WARNING" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExMissingValueGroupInspection"/>
        <localInspection groupPath="SAP Commerce" shortName="ImpExMissingHeaderParameterInspection" displayName="[y] Missing header parameter name"
                         groupName="[y] ImpEx" level="WARNING" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExMissingHeaderParameterInspection"/>
        <localInspection groupPath="SAP Commerce" shortName="ImpExOrphanValueGroupInspection" displayName="[y] Orphan value group"
                         groupName="[y] ImpEx" level="WARNING" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExOrphanValueGroupInspection"/>
        <localInspection groupPath="SAP Commerce" shortName="ImpExMultilineMacroNameInspection" displayName="[y] Multi-line macro name"
                         groupName="[y] ImpEx" level="WARNING" language="ImpEx" enabledByDefault="true"
                         implementationClass="sap.commerce.toolset.impex.codeInspection.ImpExMultilineMacroNameInspection"/>
    </extensions>

</idea-plugin>
